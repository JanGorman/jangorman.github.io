<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Design Patterns in Swift: Adapter Pattern</title>
  <meta name="description" content="Already December! Time for a new chapter on applying design patterns in Swift. This time it’s the Adapter Pattern’s turn. Good stuff! And simple!" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JanGorman" />
    <meta name="twitter:title" content="Design Patterns in Swift: Adapter Pattern" />
    <meta name="twitter:image" content="" />
    
    <meta name="twitter:description"  content="Already December! Time for a new chapter on applying design patterns in Swift. This time it’s the Adapter Pattern’s turn. Good stuff! And simple!" />
    
  
  
  <meta property="og:site_name" content="Jan Gorman" />
  <meta property="og:title" content="Design Patterns in Swift: Adapter Pattern"/>
  
  <meta property="og:description" content="Already December! Time for a new chapter on applying design patterns in Swift. This time it’s the Adapter Pattern’s turn. Good stuff! And simple!" />
  
  <meta property="og:image" content="" />
  <meta property="og:url" content="/blog/2014/12/01/design-patterns-in-swift-adapter-pattern/" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2014-12-01T20:44:17+01:00">

  <link rel="canonical" href="/blog/2014/12/01/design-patterns-in-swift-adapter-pattern/"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
</head>
  <link href='/stylesheets/all-456658fd402f091f6213dc405e964de6.css' media='all' rel='stylesheet' type='text/css'>
  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->


<!-- header end -->
    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">Design Patterns in Swift: Adapter Pattern</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/jg.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2014-12-01T20:44:17+01:00">01 Dec 2014</time>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>Already December! Time for a new chapter on applying design patterns in Swift. This time it’s the <a href="http://en.wikipedia.org/wiki/Adapter_pattern">Adapter Pattern’s</a> turn. Good stuff! And simple!</p>

<p>So what is it and what can it do for you? The Adapter Pattern converts the interface of one class into another interface. That’s it. And with this simple pattern you can let classes work together that otherwise couldn’t.</p>

<p>So let’s assume you have the following:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protocol</span> <span class="kt">MusicPlayer</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">insertMedia</span><span class="p">()</span>
    <span class="kd">func</span> <span class="nf">play</span><span class="p">()</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="kt">CassettePlayer</span><span class="p">:</span> <span class="kt">MusicPlayer</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">insertMedia</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Insert mixtape"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">play</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Push down clunky button and play"</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>Clearly, this kind if thing is only <a href="https://www.youtube.com/watch?v=dIm87r9lnD0">acceptable in the 80s</a>.</p>

<p>Fast forward to now, Spotify, beats, you name it. How do you travel back in time and get a client that accepts a <code class="highlighter-rouge">MusicPlayer</code> to stream and play a track? You adapt it:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protocol</span> <span class="kt">MediaPlayer</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">getMedia</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span>
    <span class="kd">func</span> <span class="nf">play</span><span class="p">()</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="kt">StreamingMediaPlayer</span><span class="p">:</span> <span class="kt">MediaPlayer</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">getMedia</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Acquiring </span><span class="se">\(</span><span class="n">title</span><span class="se">)</span><span class="s"> from the cloud"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">play</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Playing!"</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="c1">// MARK: Adapter in action</span>

<span class="kd">class</span> <span class="kt">StreamingMediaPlayerAdapter</span><span class="p">:</span> <span class="kt">MusicPlayer</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">player</span><span class="p">:</span> <span class="kt">StreamingMediaPlayer</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">player</span><span class="p">:</span> <span class="kt">StreamingMediaPlayer</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">player</span> <span class="o">=</span> <span class="n">player</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">insertMedia</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">player</span><span class="o">.</span><span class="nf">getMedia</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">play</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">player</span><span class="o">.</span><span class="nf">play</span><span class="p">()</span>
    <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>Jaws drop in amazement. But now consider your existing project that you want to spice up with some of that Swift. You’ve written your amazing new classes, time to integrate with Objective-C. So you head over to <a href="https://developer.apple.com/library/ios/documentation/swift/conceptual/BuildingCocoaApps/MixandMatch.html#//apple_ref/doc/uid/TP40014216-CH10-XID_77">Using Swift with Cocoa and Objective-C</a> only to find that the new goodness doesn’t all work. All of these aren’t compatible with Objective-C:</p>

<ul>
  <li>Generics</li>
  <li>Tuples</li>
  <li>Enumerations defined in Swift</li>
  <li>Structures defined in Swift</li>
  <li>Top-level functions defined in Swift</li>
  <li>Global variables defined in Swift</li>
  <li>Typealiases defined in Swift</li>
  <li>Swift-style variadics</li>
  <li>Nested types</li>
  <li>Curried functions</li>
</ul>

<p>Not to despair though, you can still go ahead and be as idiomatic in Swift as you want. With some extra effort you can get the old to talk to the new. Consider a Swift only protocol that just needs to use a tuple:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protocol</span> <span class="kt">Legend</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">doSomething</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="kt">IAmLegend</span><span class="p">:</span> <span class="kt">Legend</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">doSomething</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">return</span> <span class="p">(</span><span class="s">"very"</span><span class="p">,</span> <span class="s">"important"</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">doSomethingWithLegend</span><span class="p">(</span><span class="nv">legend</span><span class="p">:</span> <span class="kt">Legend</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">let</span> <span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">)</span> <span class="o">=</span> <span class="n">legend</span><span class="o">.</span><span class="nf">doSomething</span><span class="p">()</span>
    <span class="c1">// Do something else with these variables</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Important stuff going on. You get the idea. But obviously you won’t be able to call that from any existing code.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@objc</span> <span class="kd">class</span> <span class="kt">Compatible</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">first</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">second</span><span class="p">:</span> <span class="kt">String</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">first</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">second</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">first</span> <span class="o">=</span> <span class="n">first</span>
        <span class="k">self</span><span class="o">.</span><span class="n">second</span> <span class="o">=</span> <span class="n">second</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">class</span> <span class="kt">LegendSwiftAdapter</span><span class="p">:</span> <span class="kt">Legend</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">compatible</span><span class="p">:</span> <span class="kt">Compatible</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">compatible</span><span class="p">:</span> <span class="kt">Compatible</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">compatible</span> <span class="o">=</span> <span class="n">compatible</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">doSomething</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
         <span class="nf">return</span> <span class="p">(</span><span class="n">compatible</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">compatible</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">@objc</span> <span class="kd">class</span> <span class="kt">LegendObjcAdapter</span> <span class="p">{</span>

    <span class="kd">func</span> <span class="nf">doSomethingWithATuple</span><span class="p">(</span><span class="nv">compatible</span><span class="p">:</span> <span class="kt">Compatible</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">adapter</span> <span class="o">=</span> <span class="kt">LegendSwiftAdapter</span><span class="p">(</span><span class="n">compatible</span><span class="p">)</span>
        <span class="nf">doSomethingWithLegend</span><span class="p">(</span><span class="n">adapter</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>I hope it’s somewhat clear what’s going on. Contrived example maybe… I’ll upload a more practical application soon-ish. Anyways, that’s the Adapter Pattern applied in Swift for you. As always the code is available as Xcode playground on <a href="https://github.com/JanGorman/Swift-Design-Patterns">github</a>.</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=Design+Patterns+in+Swift%3A+Adapter+Pattern&amp;url=/blog/2014/12/01/design-patterns-in-swift-adapter-pattern"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/jg.jpg)">Blog Logo</div>
              <h4>Jan Gorman</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2014-12-01 20:44">01 Dec 2014</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Jan Gorman</a> &copy; 2017<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/background-image.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Jan Gorman</h1>
        <h2 class="blog-description">Compiling Swift Source Files</h2>
        <a href=/ class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>
  </body>
</html>
